---

---

<div class="scanner-box">
  <video id="video" class="video"></video>
</div>

<script>
  //pnpm add @zxing/browser @zxing/library
  import { BrowserQRCodeReader } from "@zxing/browser";
  
  const video = document.getElementById("video") as HTMLVideoElement;
  const codeReader = new BrowserQRCodeReader();

  const constraints = {
    video: {
      facingMode: "environment",
    },
  };

  navigator.mediaDevices
    .getUserMedia(constraints)
    .then((stream) => {
      video.srcObject = stream;
      video.play();

      codeReader.decodeFromVideoDevice(undefined, "video", (result, err) => {
        if (result) {
          const scannedText = result.getText();
          if (scannedText.startsWith("http")) {
            window.location.href = scannedText;
          }
        }
        if (err) {
          console.error(err);
        }
      });
    })
    .catch((err) => console.error(err));
</script>

<style>
  .scanner-box {
    width: 325px;
    height: 516px;
    border: 2px solid #ffffff;
    border-radius: 8px;
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    background-color: #000000;
  }

  .video {
    width: 100%;
    height: 100%;
    object-fit: cover;
  }
</style>
